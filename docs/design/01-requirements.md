## 🛠️설계 범위
- [ ] 상품 목록 / 상품 상세 / 브랜드 조회
- [ ] 상품 좋아요 등록/취소 (멱등 동작)
- [ ] 주문 생성 및 결제 흐름 (재고 차감, 포인트 차감, 외부 시스템 연동)
- [ ] 시나리오 요구사항 전체 시스템

---
### 📌 브랜드 / 상품 조회
- 모든 브랜드와 상품을 조회할 수 있다
- 특정 브랜드에 속한 물품을 필터하여 조회할 수 있다
- 카테고리 필터를 사용하여 상품을 조회할 수 있다
- 상품 조회시 총 좋아요 조회, 좋아요를 누를수 있는 기능이 포함되어야 한다
- 요청한 페이지의 행만큼의 데이터를 페이징하여 응답 해야한다
- 선택한 정렬의 기준(가격, 최근등록순, 좋아요순)으로 정렬된 데이터를 조회한다

### 📌상품 상세 조회
- 모든 사용자가 접근이 가능해야한다
- 상품에 대한 정보가 조회되어야 한다

### 📎 예외 케이스
- 조회해온 상품에 해당하는 카테고리가 없을때 응답은 빈 리스트를 가져와야 한다
- 만약 상품이 빈 리스트로 검색된 경우 같은 카테고리에있는 연관 상품을 가져와야 한다(기본값 20) - 연관검색

---
### 📌 주문
- 인가된 사용자만 주문을 할 수 있다
- 주문 하나에는 여러 상품이 있을 수 있다
- 주문자는 본인의 주소가 아닌 곳에도 배송을 요청할 수 있다
- 주문후 주문상세, 주문내역 리스트 조회가 가능해야한다
- 주문시 입력되어야하는 정보는 필수로 주문자, 상품명, 수량, 주소, 연락처, 총 구매 포인트가 입력되어야 한다 
- 주문 상세에는 언제 주문을 했는지, 총금액, 무슨 상품을 몇개를 구매했는지, 배송지, 연락처 정보가 조회되어야 한다
- 주문 리스트 결과는 언제 주문 했는지, 총금액, 무슨상품을 주문했는지가 조회되어야 한다
- 주문상태값이 (결제완료, 발송대기, 배송중, 배송완료,구매확정, 구매취소) 사용자가 명확하게 인지할 수 있도록 상태가 6개가 있어야 한다

### 📎재고차감, 결제흐름
- 결제흐름: 정상회원 인증여부 => 결제금액과 총 구매금액 비교 => 재고확인 => 정상결제 완료시 재고 차감  

### 📌 주문 상세
- 인가된 사용자만 조회 가능하다
- 주문자는 현재 주문상태를 확인하기위해 주문이 완료된 주문번호의 상세페이지를 진입해서 주문상세 내역 확인이 가능해야한다

### 💣 주문 실패 케이스
- 재고가 없을경우 주문이 실패해야한다(400에러 + 메시지 응답)
- 주문하려는 주문서 총액보다 가지고 있는 포인트가 적을경우 주문이 실패해야한다(400에러 + 메시지응답)
- 인가되지 않은 사용자가 주문을 할때(403에러 + 메시지 응답)

---
### 📌 좋아요 
- 인증된 사람(로그인 상태)만 좋아요를 할 수 있다
- 한명의 사용자는 하나의 상품에 1회 한해 좋아요를 누를수 있다
- "좋아요"가 정상 실행된다면 총 좋아요 카운팅이 +1 이 되어야 한다

### 📌 좋아요 취소
- 인증된 사람(로그인 상태)만 좋아요를 할 수 있다
- 좋아요를 누른 사람이 상품에 대해서만 "좋아요 취소"를 실행 할 수 있다
- "좋아요 취소"가 정상 실행된다면 총 좋아요 카운팅이 -1이 되어야 한다

### 💣 좋아요/취소 실패 케이스
- 존재하지 않는 상품일시 (404 + 메시지 응답)
- 동일 (상품 좋아요/취소 여러번)동작 한경우 (409 + 메시지 응답)
- 인가되지 않은 사용자가 좋아요/싫어요 시도하는 경우 (403 + 메시지 응답)

---

### 📌 리뷰 남기기
- 주문한 본인만 글쓰기 가능
- 주문 상태가 구매확정 되었을때 작성 가능

### 📌 리뷰 조회
- 주문상품에 대해 리뷰가 없으면 빈 리스트값 반환


---
### 🚀 시스템 관점
- 본인만 이용가능한 일부(주문, 좋아요) API들은 X-USER-ID 헤더값 검증이 필요하다
- 주문, 제품 조회 조회등은 다건이 있을 수 있으므로 페이징 처리가 가능해야하며 각 페이지당 결과는 기본값은 20건이 나오도록 한다
- 외부 시스템 연계간 에러 발생시 후속처리를 할 수 있도록 설계해야 한다
- 사용자의 행동을 기록하기 위한 히스토리를 저장하도록 해야한다 
